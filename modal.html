<!DOCTYPE html>
<html>

<head>
    <script src="modal.js"></script> <!-- Incluir el archivo JS externo -->
    <script>

        // Obtener el payment_token de localStorage (creado con el botÃ³n "Crear nuevo payment")
        const paymentToken = localStorage.getItem('floid_payment_token') || '78f5ed9a-5187-4ceb-a6d6-b9eb83d39e0a';
        const myModal = FloidModal(paymentToken);
        modalInstance.createModal();
        setTimeout(() => {
            myModal.open();
        }, 100)

        // Registrar un event listener para el evento 'PAYMENT_CLOSED'
        window.addEventListener('message', (event) => {
            if (event.data && event.data.status === 'PAYMENT_CLOSED') {
                myModal.close();
                console.log('modal cerrado');
            }
        });

        console.log("evento recibido", event);
        if (event.data && event.data.status === 'PAYMENT_CLOSED') {
            myModal.close();
            console.log('modal cerrado');
        }

    </script>
</head>

</html>